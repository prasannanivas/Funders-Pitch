{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{\"/i8H\":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/Campaigns/request\",function(){return a(\"YZtK\")}])},YZtK:function(e,t,a){\"use strict\";a.r(t);var r=a(\"o0o1\"),n=a.n(r),s=a(\"HaE+\"),c=a(\"1OyB\"),l=a(\"vuIU\"),i=a(\"Ji7U\"),o=a(\"md7G\"),u=a(\"foSv\"),p=a(\"q1tI\"),d=a.n(p),b=a(\"VC3L\"),f=a(\"8cHP\"),v=a(\"pVnL\"),h=a.n(v),O=(a(\"Wt1U\"),a(\"3WF5\")),j=a.n(O),m=a(\"TSYQ\"),g=a.n(m),w=(a(\"17x9\"),a(\"ZeOK\")),y=a(\"ICNK\"),R=a(\"Y53p\"),N=a(\"H+2d\");function A(e){var t=e.children,a=e.className,r=g()(a),n=Object(y.a)(A,e),s=Object(R.a)(A,e);return d.a.createElement(s,h()({},n,{className:r}),t)}A.handledProps=[\"as\",\"children\",\"className\"],A.defaultProps={as:\"tbody\"},A.propTypes={};var x=A,C=a(\"MZgk\"),k=a(\"D1pA\");function q(e){var t=e.active,a=e.children,r=e.className,n=e.collapsing,s=e.content,c=e.disabled,l=e.error,i=e.icon,o=e.negative,u=e.positive,p=e.selectable,b=e.singleLine,f=e.textAlign,v=e.verticalAlign,O=e.warning,j=e.width,m=g()(Object(w.a)(t,\"active\"),Object(w.a)(n,\"collapsing\"),Object(w.a)(c,\"disabled\"),Object(w.a)(l,\"error\"),Object(w.a)(o,\"negative\"),Object(w.a)(u,\"positive\"),Object(w.a)(p,\"selectable\"),Object(w.a)(b,\"single line\"),Object(w.a)(O,\"warning\"),Object(w.c)(f),Object(w.e)(v),Object(w.f)(j,\"wide\"),r),A=Object(y.a)(q,e),x=Object(R.a)(q,e);return N.a.isNil(a)?d.a.createElement(x,h()({},A,{className:m}),k.a.create(i),s):d.a.createElement(x,h()({},A,{className:m}),a)}q.handledProps=[\"active\",\"as\",\"children\",\"className\",\"collapsing\",\"content\",\"disabled\",\"error\",\"icon\",\"negative\",\"positive\",\"selectable\",\"singleLine\",\"textAlign\",\"verticalAlign\",\"warning\",\"width\"],q.defaultProps={as:\"td\"},q.propTypes={},q.create=Object(C.d)(q,(function(e){return{content:e}}));var P=q;function E(e){var t=e.children,a=e.className,r=e.content,n=e.fullWidth,s=g()(Object(w.a)(n,\"full-width\"),a),c=Object(y.a)(E,e),l=Object(R.a)(E,e);return d.a.createElement(l,h()({},c,{className:s}),N.a.isNil(t)?r:t)}E.handledProps=[\"as\",\"children\",\"className\",\"content\",\"fullWidth\"],E.defaultProps={as:\"thead\"},E.propTypes={};var H=E;function L(e){var t=e.as,a=Object(y.a)(L,e);return d.a.createElement(H,h()({},a,{as:t}))}L.handledProps=[\"as\"],L.propTypes={},L.defaultProps={as:\"tfoot\"};var z=L;function S(e){var t=e.as,a=e.className,r=e.sorted,n=g()(Object(w.d)(r,\"sorted\"),a),s=Object(y.a)(S,e);return d.a.createElement(P,h()({},s,{as:t,className:n}))}S.handledProps=[\"as\",\"className\",\"sorted\"],S.propTypes={},S.defaultProps={as:\"th\"};var T=S;function D(e){var t=e.active,a=e.cellAs,r=e.cells,n=e.children,s=e.className,c=e.disabled,l=e.error,i=e.negative,o=e.positive,u=e.textAlign,p=e.verticalAlign,b=e.warning,f=g()(Object(w.a)(t,\"active\"),Object(w.a)(c,\"disabled\"),Object(w.a)(l,\"error\"),Object(w.a)(i,\"negative\"),Object(w.a)(o,\"positive\"),Object(w.a)(b,\"warning\"),Object(w.c)(u),Object(w.e)(p),s),v=Object(y.a)(D,e),O=Object(R.a)(D,e);return N.a.isNil(n)?d.a.createElement(O,h()({},v,{className:f}),j()(r,(function(e){return P.create(e,{defaultProps:{as:a}})}))):d.a.createElement(O,h()({},v,{className:f}),n)}D.handledProps=[\"active\",\"as\",\"cellAs\",\"cells\",\"children\",\"className\",\"disabled\",\"error\",\"negative\",\"positive\",\"textAlign\",\"verticalAlign\",\"warning\"],D.defaultProps={as:\"tr\",cellAs:\"td\"},D.propTypes={},D.create=Object(C.d)(D,(function(e){return{cells:e}}));var F=D;function Y(e){var t=e.attached,a=e.basic,r=e.celled,n=e.children,s=e.className,c=e.collapsing,l=e.color,i=e.columns,o=e.compact,u=e.definition,p=e.fixed,b=e.footerRow,f=e.headerRow,v=e.headerRows,O=e.inverted,m=e.padded,A=e.renderBodyRow,C=e.selectable,k=e.singleLine,q=e.size,P=e.sortable,E=e.stackable,L=e.striped,S=e.structured,T=e.tableData,D=e.textAlign,B=e.unstackable,I=e.verticalAlign,_=g()(\"ui\",l,q,Object(w.a)(r,\"celled\"),Object(w.a)(c,\"collapsing\"),Object(w.a)(u,\"definition\"),Object(w.a)(p,\"fixed\"),Object(w.a)(O,\"inverted\"),Object(w.a)(C,\"selectable\"),Object(w.a)(k,\"single line\"),Object(w.a)(P,\"sortable\"),Object(w.a)(E,\"stackable\"),Object(w.a)(L,\"striped\"),Object(w.a)(S,\"structured\"),Object(w.a)(B,\"unstackable\"),Object(w.b)(t,\"attached\"),Object(w.b)(a,\"basic\"),Object(w.b)(o,\"compact\"),Object(w.b)(m,\"padded\"),Object(w.c)(D),Object(w.e)(I),Object(w.f)(i,\"column\"),\"table\",s),Z=Object(y.a)(Y,e),J=Object(R.a)(Y,e);if(!N.a.isNil(n))return d.a.createElement(J,h()({},Z,{className:_}),n);var K={defaultProps:{cellAs:\"th\"}},Q=(f||v)&&d.a.createElement(H,null,F.create(f,K),j()(v,(function(e){return F.create(e,K)})));return d.a.createElement(J,h()({},Z,{className:_}),Q,d.a.createElement(x,null,A&&j()(T,(function(e,t){return F.create(A(e,t))}))),b&&d.a.createElement(z,null,F.create(b)))}Y.handledProps=[\"as\",\"attached\",\"basic\",\"celled\",\"children\",\"className\",\"collapsing\",\"color\",\"columns\",\"compact\",\"definition\",\"fixed\",\"footerRow\",\"headerRow\",\"headerRows\",\"inverted\",\"padded\",\"renderBodyRow\",\"selectable\",\"singleLine\",\"size\",\"sortable\",\"stackable\",\"striped\",\"structured\",\"tableData\",\"textAlign\",\"unstackable\",\"verticalAlign\"],Y.defaultProps={as:\"table\"},Y.propTypes={},Y.Body=x,Y.Cell=P,Y.Footer=z,Y.Header=H,Y.HeaderCell=T,Y.Row=F;var B=Y,I=a(\"QetY\"),_=a(\"5Yp1\"),Z=a(\"JX7q\"),J=a(\"MqQV\"),K=a(\"oZBQ\"),Q=d.a.createElement;function W(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=Object(u.a)(e);if(t){var n=Object(u.a)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Object(o.a)(this,a)}}var U=function(e){Object(i.a)(a,e);var t=W(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).state={message:\"\",isApprovalLoading:!1,isFinalizeLoading:!1},r.approveHandler=r.approveHandler.bind(Object(Z.a)(r)),r.finalizeHandler=r.finalizeHandler.bind(Object(Z.a)(r)),r}return Object(l.a)(a,[{key:\"approveHandler\",value:function(){var e=Object(s.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isApprovalLoading:!0}),t=Object(b.a)(this.props.address),e.next=4,K.a.eth.getAccounts();case 4:return a=e.sent,e.prev=5,e.next=8,t.methods.approveRequest(this.props.id-1).send({from:a[0]});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),this.setState({message:e.t0.message,isApprovalLoading:!1});case 13:this.setState({isApprovalLoading:!1}),f.Router.pushRoute(\"/campaigns/show/\".concat(this.props.address,\"/request\"));case 15:case\"end\":return e.stop()}}),e,this,[[5,10]])})));return function(){return e.apply(this,arguments)}}()},{key:\"finalizeHandler\",value:function(){var e=Object(s.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isFinalizeLoading:!0}),t=Object(b.a)(this.props.address),e.next=4,K.a.eth.getAccounts();case 4:return a=e.sent,e.prev=5,e.next=8,t.methods.finalizeRequest(this.props.id-1).send({from:a[0]});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),this.setState({message:e.t0.message,isFinalizeLoading:!1});case 13:this.setState({isFinalizeLoading:!1}),f.Router.pushRoute(\"/campaigns/show/\".concat(this.props.address,\"/request\"));case 15:case\"end\":return e.stop()}}),e,this,[[5,10]])})));return function(){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){return Q(B.Body,null,Q(B.Row,null,Q(B.Cell,null,Q(J.a,null,this.props.id)),Q(B.Cell,null,Q(J.a,null,this.props.request.description)),Q(B.Cell,null,Q(J.a,null,this.props.request.value)),Q(B.Cell,null,Q(J.a,null,this.props.request.recipient)),Q(B.Cell,null,Q(J.a,null,this.props.request.approvalCount,\"/\",this.props.approversCount)),Q(B.Cell,null,Q(J.a,null,Q(I.a,{size:\"small\",color:\"teal\",onClick:this.approveHandler,loading:this.state.isApprovalLoading},\"Yes\"))),Q(B.Cell,null,Q(J.a,null,Q(I.a,{size:\"small\",color:\"green\",onClick:this.finalizeHandler,loading:this.state.isFinalizeLoading},\"Yes\")))))}}]),a}(p.Component),V=d.a.createElement;function X(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=Object(u.a)(e);if(t){var n=Object(u.a)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return Object(o.a)(this,a)}}var M=function(e){Object(i.a)(a,e);var t=X(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:\"renderRow\",value:function(){var e=this;return this.props.requests.map((function(t,a){return V(U,{key:a,id:a+1,address:e.props.address,approversCount:e.props.approversCount,request:t})}))}},{key:\"render\",value:function(){var e=B.Header,t=B.Row,a=B.HeaderCell;B.Body;return V(_.a,null,V(\"div\",{className:\"text-center\"},V(f.Link,{route:\"/campaigns/show/\".concat(this.props.address,\"/request/new\")},V(I.a,{size:\"massive\",color:\"orange\"},\"New request +\")),V(B,null,V(e,null,V(t,null,V(a,null,\"ID\"),V(a,null,\"Description\"),V(a,null,\"Amount\"),V(a,null,\"Recipient\"),V(a,null,\"Approval Count\"),V(a,null,\"Approve\"),V(a,null,\"Finalize\"))),this.renderRow())))}}],[{key:\"getInitialProps\",value:function(){var e=Object(s.a)(n.a.mark((function e(t){var a,r,s,c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(\"this is \"+t.query.address),a=Object(b.a)(t.query.address),e.next=4,a.methods.gatRequestsCount().call();case 4:return r=e.sent,e.next=7,a.methods.approversCount().call();case 7:return s=e.sent,e.next=10,Promise.all(Array(parseInt(r)).fill().map((function(e,t){return a.methods.requests(t).call()})));case 10:return c=e.sent,e.abrupt(\"return\",{address:t.query.address,requests:c,requestcount:r,approversCount:s});case 12:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),a}(p.Component);t.default=M}},[[\"/i8H\",0,2,1,3,4]]]);","extractedComments":[]}