{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport { Form, Input, Button } from \"semantic-ui-react\";\nimport Campaign from '../ethereum/campaign';\nimport web3 from '../ethereum/web3';\nimport { Router } from '../routes';\n\nclass contributeForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isloading: false,\n      value: '',\n      message: ''\n    };\n    this.submitHandler = this.submitHandler.bind(this);\n  }\n\n  async submitHandler(evt) {\n    evt.preventDefault();\n    this.setState({\n      isloading: true,\n      message: 'Waiting for confirmation....'\n    });\n    const campaign = Campaign(this.props.address);\n\n    try {\n      const accounts = await web3.eth.getAccounts();\n      await campaign.methods.contribute().send({\n        from: accounts[0],\n        value: web3.utils.toWei(this.state.value, 'ether')\n      });\n      Router.replaceRoute(`/campaigns/show/${this.props.address}`);\n    } catch (error) {\n      console.log(error);\n      this.setState({\n        message: error.message,\n        isloading: false,\n        value: ''\n      });\n      return;\n    }\n\n    this.setState({\n      isloading: false,\n      value: '',\n      message: \"Thank you so much for contributing.  Thanks!\"\n    });\n    Router.pushRoute(`/Campaigns/show/${this.props.address}`);\n  }\n\n  render() {\n    return __jsx(Form, {\n      onSubmit: this.submitHandler\n    }, __jsx(Form.Field, null, __jsx(\"label\", null, \"Amount to contribute\"), __jsx(Input, {\n      type: \"decimal\",\n      label: \"ether\",\n      size: \"massive\",\n      value: this.state.value,\n      onChange: evt => {\n        this.setState({\n          value: evt.target.value\n        });\n      },\n      labelPosition: \"right\"\n    }), __jsx(Button, {\n      color: \"olive\",\n      loading: this.state.isloading,\n      size: \"large\"\n    }, \"Contribute\"), __jsx(\"h1\", {\n      className: \"text-green-500 text-2xl font-bold\"\n    }, this.state.message)));\n  }\n\n}\n\nexport default contributeForm;","map":null,"metadata":{},"sourceType":"module"}