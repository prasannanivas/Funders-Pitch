{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport { Form, Button, Input } from \"semantic-ui-react\";\nimport Campaign from \"../../ethereum/campaign\";\nimport web3 from \"../../ethereum/web3\";\nimport { Link, Router } from \"../../routes\";\n\nvar Newrequest = /*#__PURE__*/function (_Component) {\n  _inherits(Newrequest, _Component);\n\n  var _super = _createSuper(Newrequest);\n\n  function Newrequest(props) {\n    var _this;\n\n    _classCallCheck(this, Newrequest);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      description: \"\",\n      value: \"\",\n      recipient: \"\",\n      message: \"\",\n      isloading: false\n    };\n    _this.submitHandler = _this.submitHandler.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Newrequest, [{\n    key: \"submitHandler\",\n    value: function () {\n      var _submitHandler = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(evt) {\n        var campaign, _this$state, description, value, recipient, accounts;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                evt.preventDefault();\n                this.setState({\n                  isloading: true\n                });\n                campaign = Campaign(this.props.address);\n                _this$state = this.state, description = _this$state.description, value = _this$state.value, recipient = _this$state.recipient;\n                _context.prev = 4;\n                _context.next = 7;\n                return web3.eth.getAccounts();\n\n              case 7:\n                accounts = _context.sent;\n                _context.next = 10;\n                return campaign.methods.createRequest(description, web3.utils.toWei(value, \"ether\"), recipient).send({\n                  from: accounts[0]\n                });\n\n              case 10:\n                _context.next = 16;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](4);\n                this.setState({\n                  message: _context.t0.message,\n                  isloading: false\n                });\n                return _context.abrupt(\"return\");\n\n              case 16:\n                this.setState({\n                  isloading: false\n                });\n                Router.pushRoute(\"/campaigns/show/\".concat(this.props.address, \"/request\"));\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[4, 12]]);\n      }));\n\n      function submitHandler(_x) {\n        return _submitHandler.apply(this, arguments);\n      }\n\n      return submitHandler;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return __jsx(Layout, null, __jsx(Link, {\n        primary: true,\n        route: \"/campaigns/show/\".concat(this.props.address, \"/request\")\n      }, __jsx(\"a\", null, \" \", __jsx(Button, {\n        color: \"vk\",\n        size: \"mini\"\n      }, \"<-  go back\"), \" \")), __jsx(Form, {\n        className: \"text-center\",\n        onSubmit: this.submitHandler\n      }, __jsx(Form.Field, null, __jsx(\"label\", null, \"Description\"), __jsx(Input, {\n        onChange: function onChange(evt) {\n          _this2.setState({\n            description: evt.target.value\n          });\n        },\n        value: this.state.description\n      })), __jsx(Form.Field, null, __jsx(\"label\", null, \"Value\"), __jsx(Input, {\n        label: \"ether\",\n        labelPosition: \"right\",\n        onChange: function onChange(evt) {\n          _this2.setState({\n            value: evt.target.value\n          });\n        },\n        value: this.state.value,\n        type: \"number\"\n      })), __jsx(Form.Field, null, __jsx(\"label\", null, \"Recipient\"), __jsx(Input, {\n        onChange: function onChange(evt) {\n          _this2.setState({\n            recipient: evt.target.value\n          });\n        },\n        value: this.state.recipient\n      })), __jsx(Button, {\n        color: \"teal\",\n        loading: this.state.isloading\n      }, \"Submit\"), __jsx(\"h1\", {\n        className: \"font-bold text-2xl text-red-400\"\n      }, this.state.message)));\n    }\n  }], [{\n    key: \"getInitialProps\",\n    value: function () {\n      var _getInitialProps = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(props) {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                return _context2.abrupt(\"return\", {\n                  address: props.query.address\n                });\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function getInitialProps(_x2) {\n        return _getInitialProps.apply(this, arguments);\n      }\n\n      return getInitialProps;\n    }()\n  }]);\n\n  return Newrequest;\n}(Component);\n\nexport default Newrequest;","map":{"version":3,"sources":["/Users/prasannanivas/Desktop/Funding/pages/Campaigns/newrequest.js"],"names":["React","Component","Layout","Form","Button","Input","Campaign","web3","Link","Router","Newrequest","props","state","description","value","recipient","message","isloading","submitHandler","bind","evt","preventDefault","setState","campaign","address","eth","getAccounts","accounts","methods","createRequest","utils","toWei","send","from","pushRoute","target","query"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport { Form, Button, Input } from \"semantic-ui-react\";\nimport Campaign from \"../../ethereum/campaign\";\nimport web3 from \"../../ethereum/web3\";\nimport { Link, Router } from \"../../routes\";\nclass Newrequest extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      description: \"\",\n      value: \"\",\n      recipient: \"\",\n      message: \"\",\n      isloading: false,\n    };\n    this.submitHandler = this.submitHandler.bind(this);\n  }\n\n  static async getInitialProps(props) {\n    return { address: props.query.address };\n  }\n\n  async submitHandler(evt) {\n    evt.preventDefault();\n    this.setState({ isloading: true });\n    const campaign = Campaign(this.props.address);\n    const { description, value, recipient } = this.state;\n\n    try {\n      const accounts = await web3.eth.getAccounts();\n      await campaign.methods\n        .createRequest(description, web3.utils.toWei(value, \"ether\"), recipient)\n        .send({ from: accounts[0] });\n    } catch (error) {\n      this.setState({ message: error.message, isloading: false });\n      return;\n    }\n    this.setState({\n      isloading: false,\n    });\n    Router.pushRoute(`/campaigns/show/${this.props.address}/request`);\n  }\n  render() {\n    return (\n      <Layout>\n        <Link primary route={`/campaigns/show/${this.props.address}/request`}>\n          <a>\n            {\" \"}\n            <Button color=\"vk\" size=\"mini\">{`<-  go back`}</Button>{\" \"}\n          </a>\n        </Link>\n        <Form className=\"text-center\" onSubmit={this.submitHandler}>\n          <Form.Field>\n            <label>Description</label>\n            <Input\n              onChange={(evt) => {\n                this.setState({ description: evt.target.value });\n              }}\n              value={this.state.description}\n            />\n          </Form.Field>\n\n          <Form.Field>\n            <label>Value</label>\n            <Input\n              label=\"ether\"\n              labelPosition=\"right\"\n              onChange={(evt) => {\n                this.setState({ value: evt.target.value });\n              }}\n              value={this.state.value}\n              type=\"number\"\n            />\n          </Form.Field>\n\n          <Form.Field>\n            <label>Recipient</label>\n            <Input\n              onChange={(evt) => {\n                this.setState({ recipient: evt.target.value });\n              }}\n              value={this.state.recipient}\n            />\n          </Form.Field>\n          <Button color=\"teal\" loading={this.state.isloading}>\n            Submit\n          </Button>\n          <h1 className=\"font-bold text-2xl text-red-400\">\n            {this.state.message}\n          </h1>\n        </Form>\n      </Layout>\n    );\n  }\n}\n\nexport default Newrequest;\n"]},"metadata":{},"sourceType":"module"}