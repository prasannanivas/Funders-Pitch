{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport { Form, Button, Input } from \"semantic-ui-react\";\nimport Campaign from \"../../ethereum/campaign\";\nimport web3 from \"../../ethereum/web3\";\nimport { Link, Router } from \"../../routes\";\n\nclass Newrequest extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      description: \"\",\n      value: \"\",\n      recipient: \"\",\n      message: \"\",\n      isloading: false\n    };\n    this.submitHandler = this.submitHandler.bind(this);\n  }\n\n  static async getInitialProps(props) {\n    return {\n      address: props.query.address\n    };\n  }\n\n  async submitHandler(evt) {\n    evt.preventDefault();\n    this.setState({\n      isloading: true\n    });\n    const campaign = Campaign(this.props.address);\n    const {\n      description,\n      value,\n      recipient\n    } = this.state;\n\n    try {\n      const accounts = await web3.eth.getAccounts();\n      await campaign.methods.createRequest(description, web3.utils.toWei(value, \"ether\"), recipient).send({\n        from: accounts[0]\n      });\n    } catch (error) {\n      this.setState({\n        message: error.message,\n        isloading: false\n      });\n      return;\n    }\n\n    this.setState({\n      isloading: false\n    });\n    Router.pushRoute(`/campaigns/show/${this.props.address}/request`);\n  }\n\n  render() {\n    return __jsx(Layout, null, __jsx(Link, {\n      primary: true,\n      route: `/campaigns/show/${this.props.address}/request`\n    }, __jsx(\"a\", null, \" \", __jsx(Button, {\n      color: \"vk\",\n      size: \"mini\"\n    }, `<-  go back`), \" \")), __jsx(Form, {\n      className: \"text-center\",\n      onSubmit: this.submitHandler\n    }, __jsx(Form.Field, null, __jsx(\"label\", null, \"Description\"), __jsx(Input, {\n      onChange: evt => {\n        this.setState({\n          description: evt.target.value\n        });\n      },\n      value: this.state.description\n    })), __jsx(Form.Field, null, __jsx(\"label\", null, \"Value\"), __jsx(Input, {\n      label: \"ether\",\n      labelPosition: \"right\",\n      onChange: evt => {\n        this.setState({\n          value: evt.target.value\n        });\n      },\n      value: this.state.value,\n      type: \"number\"\n    })), __jsx(Form.Field, null, __jsx(\"label\", null, \"Recipient\"), __jsx(Input, {\n      onChange: evt => {\n        this.setState({\n          recipient: evt.target.value\n        });\n      },\n      value: this.state.recipient\n    })), __jsx(Button, {\n      color: \"teal\",\n      loading: this.state.isloading\n    }, \"Submit\"), __jsx(\"h1\", {\n      className: \"font-bold text-2xl text-red-400\"\n    }, this.state.message)));\n  }\n\n}\n\nexport default Newrequest;","map":{"version":3,"sources":["/Users/prasannanivas/Desktop/Funding/pages/Campaigns/newrequest.js"],"names":["React","Component","Layout","Form","Button","Input","Campaign","web3","Link","Router","Newrequest","constructor","props","state","description","value","recipient","message","isloading","submitHandler","bind","getInitialProps","address","query","evt","preventDefault","setState","campaign","accounts","eth","getAccounts","methods","createRequest","utils","toWei","send","from","error","pushRoute","render","target"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport { Form, Button, Input } from \"semantic-ui-react\";\nimport Campaign from \"../../ethereum/campaign\";\nimport web3 from \"../../ethereum/web3\";\nimport { Link, Router } from \"../../routes\";\nclass Newrequest extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      description: \"\",\n      value: \"\",\n      recipient: \"\",\n      message: \"\",\n      isloading: false,\n    };\n    this.submitHandler = this.submitHandler.bind(this);\n  }\n\n  static async getInitialProps(props) {\n    return { address: props.query.address };\n  }\n\n  async submitHandler(evt) {\n    evt.preventDefault();\n    this.setState({ isloading: true });\n    const campaign = Campaign(this.props.address);\n    const { description, value, recipient } = this.state;\n\n    try {\n      const accounts = await web3.eth.getAccounts();\n      await campaign.methods\n        .createRequest(description, web3.utils.toWei(value, \"ether\"), recipient)\n        .send({ from: accounts[0] });\n    } catch (error) {\n      this.setState({ message: error.message, isloading: false });\n      return;\n    }\n    this.setState({\n      isloading: false,\n    });\n    Router.pushRoute(`/campaigns/show/${this.props.address}/request`);\n  }\n  render() {\n    return (\n      <Layout>\n        <Link primary route={`/campaigns/show/${this.props.address}/request`}>\n          <a>\n            {\" \"}\n            <Button color=\"vk\" size=\"mini\">{`<-  go back`}</Button>{\" \"}\n          </a>\n        </Link>\n        <Form className=\"text-center\" onSubmit={this.submitHandler}>\n          <Form.Field>\n            <label>Description</label>\n            <Input\n              onChange={(evt) => {\n                this.setState({ description: evt.target.value });\n              }}\n              value={this.state.description}\n            />\n          </Form.Field>\n\n          <Form.Field>\n            <label>Value</label>\n            <Input\n              label=\"ether\"\n              labelPosition=\"right\"\n              onChange={(evt) => {\n                this.setState({ value: evt.target.value });\n              }}\n              value={this.state.value}\n              type=\"number\"\n            />\n          </Form.Field>\n\n          <Form.Field>\n            <label>Recipient</label>\n            <Input\n              onChange={(evt) => {\n                this.setState({ recipient: evt.target.value });\n              }}\n              value={this.state.recipient}\n            />\n          </Form.Field>\n          <Button color=\"teal\" loading={this.state.isloading}>\n            Submit\n          </Button>\n          <h1 className=\"font-bold text-2xl text-red-400\">\n            {this.state.message}\n          </h1>\n        </Form>\n      </Layout>\n    );\n  }\n}\n\nexport default Newrequest;\n"]},"metadata":{},"sourceType":"module"}